
String.prototype.trim=function(){return this.replace(/^[\s\n\r]+|[\s\n\r]+$/g,'')}
function is_null(input,value){return(input===null)?value:input;}
function trim(myString){return myString.replace(/^\s+/g,'').replace(/\s+$/g,'')}
function is_string(mixed_var){return(typeof(mixed_var)=='string');}
function is_int(input){return typeof(input)=='number'&&parseInt(input)==input;}
function is_numeric(val){if(isNaN(parseFloat(val))){return false;}
return true}
function is_array(mixed_var){var key='';var getFuncName=function(fn){var name=(/\W*function\s+([\w\$]+)\s*\(/).exec(fn);if(!name){return'(Anonymous)';}
return name[1];};if(!mixed_var){return false;}
this.php_js=this.php_js||{};this.php_js.ini=this.php_js.ini||{};if(typeof mixed_var==='object'){if(this.php_js.ini['phpjs.objectsAsArrays']&&((this.php_js.ini['phpjs.objectsAsArrays'].local_value.toLowerCase&&this.php_js.ini['phpjs.objectsAsArrays'].local_value.toLowerCase()==='off')||parseInt(this.php_js.ini['phpjs.objectsAsArrays'].local_value,10)===0)){return mixed_var.hasOwnProperty('length')&&!mixed_var.propertyIsEnumerable('length')&&getFuncName(mixed_var.constructor)!=='String';}
if(mixed_var.hasOwnProperty){for(key in mixed_var){if(false===mixed_var.hasOwnProperty(key)){return false;}}}
return true;}
return false;}
function NumberToDate(v){return parseInt(v)*1000;}
function DateToNumber(v){return parseInt(v)/1000;}
function str_to_float(v){v=new String(v);return parseFloat(v.replace(',','.'));}
function implode(glue,pieces){var i='',retVal='',tGlue='';if(arguments.length===1){pieces=glue;glue='';}
if(typeof(pieces)==='object'){if(pieces instanceof Array){return pieces.join(glue);}else{for(i in pieces){retVal+=tGlue+pieces[i];tGlue=glue;}
return retVal;}}else{return pieces;}}
Number.prototype.decimal=function(num){return parseFloat(parseFloat(this+0.00001).toFixed(num));}
var Ext=Ext||{}
if(Ext.ns){Ext.ns('Extensive.grid');Extensive.grid.ItemDeleter=Ext.extend(Ext.grid.RowSelectionModel,{width:20,sortable:false,dataIndex:0,menuDisabled:true,fixed:true,header:'x',_enabled:true,initEvents:function(){Extensive.grid.ItemDeleter.superclass.initEvents.call(this);var f=this;this.grid.on('cellclick',function(grid,rowIndex,columnIndex,e){if(f._enabled&&(columnIndex==grid.getColumnModel().getIndexById(f.id))){try{var record=grid.getStore().getAt(rowIndex);grid.getStore().remove(record);}catch(e){console.dir(e);}}});},enable:function(){this._enabled=true;},disable:function(){this._enabled=false;},renderer:function(v,p,record,rowIndex){return'<span class="icon-delete-column" style="margin-left: -15px; align:left; width: 32; height: 16px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>';}});Ext.apply(Ext.form.VTypes,{password:function(value,field){if(field.initialPasswordField){var pwd=Ext.getCmp(field.initialPasswordField);this.passwordText='password_confirm_error';return(value==pwd.getValue());}
return true;},passwordText:'Passwords must be at least 5 characters, containing either a number, or a valid special character (!@#$%^&*()-_=+)'});Ext.apply(Ext.layout.FormLayout.prototype,{originalRenderItem:Ext.layout.FormLayout.prototype.renderItem,renderItem:function(c,position,target){if(c&&!c.rendered&&c.isFormField&&c.fieldLabel&&c.allowBlank===false){c.fieldLabel=c.fieldLabel+" <span class=\"req\">*</span>";}
this.originalRenderItem.apply(this,arguments);}});}
function ProcesarImportes(ct,dt,pr,iva,rec){ct=parseInt(ct);dt=parseFloat(dt);iva=parseFloat(iva);rec=parseFloat(rec);var unitario=pr*(1-dt/100);unitario=unitario.decimal(Ext.app.DECIMALS);var total=unitario*ct;total=total.decimal(Ext.app.DECIMALS);var base=QuitarIVA(total,iva);var recargo=ValorRecargo(base,rec)
var iva1=total-base;var iva2=CalcularIVA(base,iva);iva1=iva1.decimal(Ext.app.DECIMALS);total+=recargo;var t2=base+iva2;t2=t2.decimal(Ext.app.DECIMALS)
if(t2!=total)
{unitario-=0.01;base=QuitarIVA(unitario,iva)*ct;iva1=CalcularIVA(base,iva);total=base+iva1;}
return{base:base,iva:iva1,recargo:recargo,unitario:unitario,total:total};}
function CalcularIVA(pr,iva){var v=parseFloat(pr)*(parseFloat(iva)/100);return parseFloat(v.decimal(Ext.app.DECIMALS));}
function AplicarIVA(pr,iva){var v=parseFloat(pr)*(1+(parseFloat(iva)/100));return parseFloat(v.decimal(Ext.app.DECIMALS));}
function ValorRecargo(pr,rec){var v=parseFloat(pr)*(parseFloat(rec)/100);return parseFloat(v.decimal(Ext.app.DECIMALS));}
function QuitarIVA(pr,iva){var v=parseFloat(pr)/(1+(parseFloat(iva)/100));return parseFloat(v.decimal(Ext.app.DECIMALS));}
function tooltip_error(cmp,title,text){var t=new Ext.ToolTip({title:'<b>'+title+'</b>',id:'content-anchor-tip',target:cmp.getEl(),anchor:'top',html:'<div id="tooltip-error">'+text+'</div>',width:200,autoHide:false,closable:true});t.show();}
function Margen(venta,coste){venta=parseFloat(venta);coste=parseFloat(coste);if(venta<0)
venta=-venta;if(coste<0)
coste=-coste;var m=(venta==0)?0:(1-(coste/venta));m=m.decimal(Ext.app.DECIMALS)*100;return m;}
function DescuentoMaximo(precio,coste,margen,acinco){precio=parseFloat(precio);coste=parseFloat(coste);margen=parseFloat(margen);if(precio<0)
precio=-precio;if(coste<0)
coste=-coste;if(margen<0)
margen=-margen;margen=margen/100.0;var f=((1.0-margen)*precio);var dto=(f==0)?0:(1-(coste/f));dto=dto.decimal(Ext.app.DECIMALS)*100;if(acinco===true){var r=(dto%5);dto-=r;}
return dto;}
function FormatNumeroFactura(numero,serie){return numero+'-'+serie;}
function ceros(v,num){var numCeros='000000000000';numCeros=numCeros.substring(0,num);return numCeros.substring(0,numCeros.length-v.length)+valor;}
function in_array(needle,haystack,argStrict){var key='',strict=!!argStrict;if(strict){for(key in haystack){if(haystack[key]===needle){return true;}}}else{for(key in haystack){if(haystack[key]==needle){return true;}}}
return false;}
if(Ext.extend){Ext.IframeWindow=Ext.extend(Ext.Window,{onRender:function(){this.bodyCfg={tag:'iframe',src:this.src,cls:this.bodyCls,style:{border:'0px none'}};Ext.IframeWindow.superclass.onRender.apply(this,arguments);}});}
function Hash(){this.length=0;this.items=new Array();for(var i=0;i<arguments.length;i+=2){if(typeof(arguments[i+1])!='undefined'){this.items[arguments[i]]=arguments[i+1];this.length++;}}
this.removeItem=function(in_key){var tmp_previous;if(typeof(this.items[in_key])!='undefined'){this.length--;var tmp_previous=this.items[in_key];delete this.items[in_key];}
return tmp_previous;}
this.getItem=function(in_key){return this.items[in_key];}
this.setItem=function(in_key,in_value){var tmp_previous;if(typeof(in_value)!='undefined'){if(typeof(this.items[in_key])=='undefined'){this.length++;}else{tmp_previous=this.items[in_key];}
this.items[in_key]=in_value;}
return tmp_previous;}
this.hasItem=function(in_key){return typeof(this.items[in_key])!='undefined';}
this.clear=function(){for(var i in this.items){delete this.items[i];}
this.length=0;}}
function printf(){var body,elmt,d=this.window.document;var ret='';var HTMLNS='http://www.w3.org/1999/xhtml';body=d.getElementsByTagNameNS?(d.getElementsByTagNameNS(HTMLNS,'body')[0]?d.getElementsByTagNameNS(HTMLNS,'body')[0]:d.documentElement.lastChild):d.getElementsByTagName('body')[0];if(!body){return false;}
ret=this.sprintf.apply(this,arguments);elmt=d.createTextNode(ret);body.appendChild(elmt);return ret.length;}
function sprintf(){var regex=/%%|%(\d+\$)?([-+\'#0 ]*)(\*\d+\$|\*|\d+)?(\.(\*\d+\$|\*|\d+))?([scboxXuidfegEG])/g;var a=arguments,i=0,format=a[i++];var pad=function(str,len,chr,leftJustify){if(!chr){chr=' ';}
var padding=(str.length>=len)?'':Array(1+len-str.length>>>0).join(chr);return leftJustify?str+padding:padding+str;};var justify=function(value,prefix,leftJustify,minWidth,zeroPad,customPadChar){var diff=minWidth-value.length;if(diff>0){if(leftJustify||!zeroPad){value=pad(value,minWidth,customPadChar,leftJustify);}else{value=value.slice(0,prefix.length)+pad('',diff,'0',true)+value.slice(prefix.length);}}
return value;};var formatBaseX=function(value,base,prefix,leftJustify,minWidth,precision,zeroPad){var number=value>>>0;prefix=prefix&&number&&{'2':'0b','8':'0','16':'0x'}[base]||'';value=prefix+pad(number.toString(base),precision||0,'0',false);return justify(value,prefix,leftJustify,minWidth,zeroPad);};var formatString=function(value,leftJustify,minWidth,precision,zeroPad,customPadChar){if(precision!=null){value=value.slice(0,precision);}
return justify(value,'',leftJustify,minWidth,zeroPad,customPadChar);};var doFormat=function(substring,valueIndex,flags,minWidth,_,precision,type){var number;var prefix;var method;var textTransform;var value;if(substring=='%%'){return'%';}
var leftJustify=false,positivePrefix='',zeroPad=false,prefixBaseX=false,customPadChar=' ';var flagsl=flags.length;for(var j=0;flags&&j<flagsl;j++){switch(flags.charAt(j)){case' ':positivePrefix=' ';break;case'+':positivePrefix='+';break;case'-':leftJustify=true;break;case"'":customPadChar=flags.charAt(j+1);break;case'0':zeroPad=true;break;case'#':prefixBaseX=true;break;}}
if(!minWidth){minWidth=0;}else if(minWidth=='*'){minWidth=+a[i++];}else if(minWidth.charAt(0)=='*'){minWidth=+a[minWidth.slice(1,-1)];}else{minWidth=+minWidth;}
if(minWidth<0){minWidth=-minWidth;leftJustify=true;}
if(!isFinite(minWidth)){throw new Error('sprintf: (minimum-)width must be finite');}
if(!precision){precision='fFeE'.indexOf(type)>-1?6:(type=='d')?0:undefined;}else if(precision=='*'){precision=+a[i++];}else if(precision.charAt(0)=='*'){precision=+a[precision.slice(1,-1)];}else{precision=+precision;}
value=valueIndex?a[valueIndex.slice(0,-1)]:a[i++];switch(type){case's':return formatString(String(value),leftJustify,minWidth,precision,zeroPad,customPadChar);case'c':return formatString(String.fromCharCode(+value),leftJustify,minWidth,precision,zeroPad);case'b':return formatBaseX(value,2,prefixBaseX,leftJustify,minWidth,precision,zeroPad);case'o':return formatBaseX(value,8,prefixBaseX,leftJustify,minWidth,precision,zeroPad);case'x':return formatBaseX(value,16,prefixBaseX,leftJustify,minWidth,precision,zeroPad);case'X':return formatBaseX(value,16,prefixBaseX,leftJustify,minWidth,precision,zeroPad).toUpperCase();case'u':return formatBaseX(value,10,prefixBaseX,leftJustify,minWidth,precision,zeroPad);case'i':case'd':number=parseInt(+value,10);prefix=number<0?'-':positivePrefix;value=prefix+pad(String(Math.abs(number)),precision,'0',false);return justify(value,prefix,leftJustify,minWidth,zeroPad);case'e':case'E':case'f':case'F':case'g':case'G':number=+value;prefix=number<0?'-':positivePrefix;method=['toExponential','toFixed','toPrecision']['efg'.indexOf(type.toLowerCase())];textTransform=['toString','toUpperCase']['eEfFgG'.indexOf(type)%2];value=prefix+Math.abs(number)[method](precision);return justify(value,prefix,leftJustify,minWidth,zeroPad)[textTransform]();default:return substring;}};return format.replace(regex,doFormat);}
this.ObjUtil={};ObjUtil.isObject=function(obj){return Object.prototype.toString.call(obj)==="[object Object]";};ObjUtil.isString=function(obj){return Object.prototype.toString.call(obj)==="[object String]";};ObjUtil.isNumber=function(obj){return Object.prototype.toString.call(obj)==="[object Number]";};ObjUtil.isBoolean=function(obj){return Object.prototype.toString.call(obj)==="[object Boolean]";};ObjUtil.isArray=function(obj){return Object.prototype.toString.call(obj)==="[object Array]";};ObjUtil.isFunction=function(obj){return Object.prototype.toString.call(obj)==="[object Function]";};ObjUtil.isDate=function(obj){return Object.prototype.toString.call(obj)==="[object Date]";};ObjUtil.isRegExp=function(obj){return Object.prototype.toString.call(obj)==="[object RegExp]";};ObjUtil.addOverload=function(obj,name,func){var old=obj[name];obj[name]=function(){if(func.length==arguments.length){return func.apply(obj,arguments);}else if(typeof old=="function"){return old.apply(obj,arguments);}};};ObjUtil.compareTo=function(a,b){if(ObjUtil.isString(a)){a=a.toLowerCase();}
if(ObjUtil.isString(b)){b=b.toLowerCase();}
if(a<b){return-1;}
if(a>b){return 1;}
return 0;};ObjUtil.memo=function(func,seed){var cache=seed||{};var shell=function(arg){if(!(arg in cache)){cache[arg]=func(shell,arg);}
return cache[arg];};return shell;};ObjUtil.merge=function(){var target=arguments[0]||{},i=1,length=arguments.length,deep=false,options;if(typeof target==="boolean"){deep=target;target=arguments[1]||{};i=2;}
if(typeof target!=="object"&&!jQuery.isFunction(target)){target={};}
if(length==i){target=this;--i;}
for(;i<length;i++)
if((options=arguments[i])!=null)
for(var name in options){var src=target[name],copy=options[name];if(target===copy){continue;}
if(deep&&copy&&typeof copy==="object"&&!copy.nodeType){target[name]=jQuery.extend(deep,src||(copy.length!=null?[]:{}),copy);}else if(copy!==undefined){target[name]=copy;}}
return target;};if(!Array.forEach){Array.prototype.forEach=function(func){for(var i in this){if(this.hasOwnProperty(i)){func(this[i]);}}};}
if(!Array.findAll){Array.prototype.findAll=function(func){var items=[];this.forEach(function(i){if(!ObjUtil.isFunction(i)){if(func(i)){items.push(i);}}});return items;};}
var BPObserver=function(){this.observations=[];};var BPObservation=function(name,func){this.name=name;this.func=func;};BPObserver.prototype={observe:function(name,func){var exists=this.observations.findAll(function(i){return i.name==name&&i.func==func;}).length>0;if(!exists){this.observations.push(new BPObservation(name,func));}},unobserve:function(name,func){this.observations.remove(function(i){return i.name==name&&i.func==func;});},fire:function(name,data,scope){var funcs=this.observations.findAll(function(i){return i.name==name;});funcs.forEach(function(i){i.func.call(scope||window,data);});}};if(Ext.override){Ext.override(Ext.ToolTip,{onTargetOver:function(e){if(this.disabled||e.within(this.target.dom,true)){return;}
var t=e.getTarget(this.delegate);if(t){this.triggerElement=t;this.clearTimer('hide');this.targetXY=e.getXY();this.delayShow();}},onMouseMove:function(e){var t=e.getTarget(this.delegate);if(t){this.targetXY=e.getXY();if(t===this.triggerElement){if(!this.hidden&&this.trackMouse){this.setPagePosition(this.getTargetXY());}}else{this.hide();this.lastActive=new Date(0);this.onTargetOver(e);}}else if(!this.closable&&this.isVisible()){this.hide();}},hide:function(){this.clearTimer('dismiss');this.lastActive=new Date();delete this.triggerElement;Ext.ToolTip.superclass.hide.call(this);}});}
if(!window['console']){if(window['loadFirebugConsole']){window.loadFirebugConsole();}else{var firebugLite=function(F,i,r,e,b,u,g,L,I,T,E){if(F.getElementById(b))
return;E=F[i+'NS']&&F.documentElement.namespaceURI;E=E?F[i+'NS'](E,'script'):F[i]('script');E[r]('id',b);E[r]('src',I+g+T);E[r](b,u);(F[e]('head')[0]||F[e]('body')[0]).appendChild(E);E=new Image;E[r]('src',I+L);};firebugLite(document,'createElement','setAttribute','getElementsByTagName','FirebugLite','4','firebug-lite.js','releases/lite/latest/skin/xp/sprite.png','https://getfirebug.com/','#startOpened');}}else{}
if(!window.console)
console={};console.log=console.log||function(){};console.warn=console.warn||function(){};console.error=console.error||function(){};console.info=console.info||function(){};console.dir=console.dir||function(){console.log('NOP dir');};function getTarifa(pvp,iva,tipo,articulo_tarifas,tarifas,tarifas_general){var tarifa=null;Ext.each(tarifas,function(item){if(item.nIdTipoLibro==tipo){tarifa=item.nIdTipoTarifa;return false;}});if(tarifa==null)
tarifa=tarifas_general;if(tarifa==null)
return pvp;var precio=null;Ext.each(articulo_tarifas,function(item){if(item.nIdTipoTarifa==tarifa){precio=item.fPrecio;return false;}});if(precio==null)
return pvp;return AplicarIVA(precio,iva);}
function format_enlace_cmd(texto,url,style){if(style==null)
style='cmd-link';return"<span class='"+style+"'><a href=\"javascript:parent.Ext.app.execCmd({url: '"+url+"'});\">"+texto+"</a></span>";}
function urldecode(str){return decodeURIComponent((str+'').replace(/\+/g,'%20'));}
function parse_str(str,array){var glue1='=',glue2='&',array2=String(str).replace(/^&?([\s\S]*?)&?$/,'$1').split(glue2),i,j,chr,tmp,key,value,bracket,keys,evalStr,that=this,fixStr=function(str){return that.urldecode(str).replace(/([\\"'])/g,'\\$1').replace(/\n/g,'\\n').replace(/\r/g,'\\r');};if(!array){array=this.window;}
for(i=0;i<array2.length;i++){tmp=array2[i].split(glue1);if(tmp.length<2){tmp=[tmp,''];}
key=fixStr(tmp[0]);value=fixStr(tmp[1]);while(key.charAt(0)===' '){key=key.substr(1);}
if(key.indexOf('\0')!==-1){key=key.substr(0,key.indexOf('\0'));}
if(key&&key.charAt(0)!=='['){keys=[];bracket=0;for(j=0;j<key.length;j++){if(key.charAt(j)==='['&&!bracket){bracket=j+1;}else if(key.charAt(j)===']'){if(bracket){if(!keys.length){keys.push(key.substr(0,bracket-1));}
keys.push(key.substr(bracket,j-bracket));bracket=0;if(key.charAt(j+1)!=='['){break;}}}}
if(!keys.length){keys=[key];}
for(j=0;j<keys[0].length;j++){chr=keys[0].charAt(j);if(chr===' '||chr==='.'||chr==='['){keys[0]=keys[0].substr(0,j)+'_'+keys[0].substr(j+1);}
if(chr==='['){break;}}
evalStr='array';for(j=0;j<keys.length;j++){key=keys[j];if((key!==''&&key!==' ')||j===0){key="'"+key+"'";}else{key=eval(evalStr+'.push([]);')-1;}
evalStr+='['+key+']';if(j!==keys.length-1&&eval('typeof '+evalStr)==='undefined'){eval(evalStr+' = [];');}}
evalStr+=" = '"+value+"';\n";eval(evalStr);}}}
var renderInfo=function(val,x,r,row,col){if(r!=null){if(x!=null)
x.css='icon-status-text-'+r.data.nIdInformacion;return(val!=null)?('&nbsp;&nbsp;'+val):'';}
return val;}
var renderInfoCliente=function(val,x,r,row,col){if(r!=null){if(x!=null)
x.css='icon-status-text-'+r.data.nIdTipoInformacion;return(val!=null)?('&nbsp;&nbsp;'+val):'';}
return val;}
function serialize(arr){if(arr==null)
return'';var res='a:'+arr.length+':{';for(i=0;i<arr.length;i++){res+='i:'+i+';s:'+arr[i].length+':"'+arr[i]+'";';}
res+='}';return res;}
function utf8_encode(argString){if(argString===null||typeof argString==="undefined"){return"";}
var string=(argString+'');var utftext="",start,end,stringl=0;start=end=0;stringl=string.length;for(var n=0;n<stringl;n++){var c1=string.charCodeAt(n);var enc=null;if(c1<128){end++;}else if(c1>127&&c1<2048){enc=String.fromCharCode((c1>>6)|192)+String.fromCharCode((c1&63)|128);}else{enc=String.fromCharCode((c1>>12)|224)+String.fromCharCode(((c1>>6)&63)|128)+String.fromCharCode((c1&63)|128);}
if(enc!==null){if(end>start){utftext+=string.slice(start,end);}
utftext+=enc;start=end=n+1;}}
if(end>start){utftext+=string.slice(start,stringl);}
return utftext;}
function unserialize(data){var that=this;var utf8Overhead=function(chr){var code=chr.charCodeAt(0);if(code<0x0080){return 0;}
if(code<0x0800){return 1;}
return 2;};var error=function(type,msg,filename,line){throw new that.window[type](msg,filename,line);};var read_until=function(data,offset,stopchr){var buf=[];var chr=data.slice(offset,offset+1);var i=2;while(chr!=stopchr){if((i+offset)>data.length){error('Error','Invalid');}
buf.push(chr);chr=data.slice(offset+(i-1),offset+i);i+=1;}
return[buf.length,buf.join('')];};var read_chrs=function(data,offset,length){var buf;buf=[];for(var i=0;i<length;i++){var chr=data.slice(offset+(i-1),offset+i);buf.push(chr);length-=utf8Overhead(chr);}
return[buf.length,buf.join('')];};var _unserialize=function(data,offset){var readdata;var readData;var chrs=0;var ccount;var stringlength;var keyandchrs;var keys;if(!offset){offset=0;}
var dtype=(data.slice(offset,offset+1)).toLowerCase();var dataoffset=offset+2;var typeconvert=function(x){return x;};switch(dtype){case'i':typeconvert=function(x){return parseInt(x,10);};readData=read_until(data,dataoffset,';');chrs=readData[0];readdata=readData[1];dataoffset+=chrs+1;break;case'b':typeconvert=function(x){return parseInt(x,10)!==0;};readData=read_until(data,dataoffset,';');chrs=readData[0];readdata=readData[1];dataoffset+=chrs+1;break;case'd':typeconvert=function(x){return parseFloat(x);};readData=read_until(data,dataoffset,';');chrs=readData[0];readdata=readData[1];dataoffset+=chrs+1;break;case'n':readdata=null;break;case's':ccount=read_until(data,dataoffset,':');chrs=ccount[0];stringlength=ccount[1];dataoffset+=chrs+2;readData=read_chrs(data,dataoffset+1,parseInt(stringlength,10));chrs=readData[0];readdata=readData[1];dataoffset+=chrs+2;if(chrs!=parseInt(stringlength,10)&&chrs!=readdata.length){error('SyntaxError','String length mismatch');}
readdata=that.utf8_decode(readdata);break;case'a':readdata={};keyandchrs=read_until(data,dataoffset,':');chrs=keyandchrs[0];keys=keyandchrs[1];dataoffset+=chrs+2;for(var i=0;i<parseInt(keys,10);i++){var kprops=_unserialize(data,dataoffset);var kchrs=kprops[1];var key=kprops[2];dataoffset+=kchrs;var vprops=_unserialize(data,dataoffset);var vchrs=vprops[1];var value=vprops[2];dataoffset+=vchrs;readdata[key]=value;}
dataoffset+=1;break;default:error('SyntaxError','Unknown / Unhandled data type(s): '+dtype);break;}
return[dtype,dataoffset-offset,typeconvert(readdata)];};return _unserialize((data+''),0)[2];}
function serialize(mixed_value){var _utf8Size=function(str){var size=0,i=0,l=str.length,code='';for(i=0;i<l;i++){code=str.charCodeAt(i);if(code<0x0080){size+=1;}else if(code<0x0800){size+=2;}else{size+=3;}}
return size;};var _getType=function(inp){var type=typeof inp,match;var key;if(type==='object'&&!inp){return'null';}
if(type==="object"){if(!inp.constructor){return'object';}
var cons=inp.constructor.toString();match=cons.match(/(\w+)\(/);if(match){cons=match[1].toLowerCase();}
var types=["boolean","number","string","array"];for(key in types){if(cons==types[key]){type=types[key];break;}}}
return type;};var type=_getType(mixed_value);var val,ktype='';switch(type){case"function":val="";break;case"boolean":val="b:"+(mixed_value?"1":"0");break;case"number":val=(Math.round(mixed_value)==mixed_value?"i":"d")+":"+mixed_value;break;case"string":val="s:"+_utf8Size(mixed_value)+":\""+mixed_value+"\"";break;case"array":case"object":val="a";var count=0;var vals="";var okey;var key;for(key in mixed_value){if(mixed_value.hasOwnProperty(key)){ktype=_getType(mixed_value[key]);if(ktype==="function"){continue;}
okey=(key.match(/^[0-9]+$/)?parseInt(key,10):key);vals+=this.serialize(okey)+this.serialize(mixed_value[key]);count++;}}
val+=":"+count+":{"+vals+"}";break;case"undefined":default:val="N";break;}
if(type!=="object"&&type!=="array"){val+=";";}
return val;}
function utf8_decode(str_data){var tmp_arr=[],i=0,ac=0,c1=0,c2=0,c3=0;str_data+='';while(i<str_data.length){c1=str_data.charCodeAt(i);if(c1<128){tmp_arr[ac++]=String.fromCharCode(c1);i++;}else if(c1>191&&c1<224){c2=str_data.charCodeAt(i+1);tmp_arr[ac++]=String.fromCharCode(((c1&31)<<6)|(c2&63));i+=2;}else{c2=str_data.charCodeAt(i+1);c3=str_data.charCodeAt(i+2);tmp_arr[ac++]=String.fromCharCode(((c1&15)<<12)|((c2&63)<<6)|(c3&63));i+=3;}}
return tmp_arr.join('');}
function ucfirst(str){str+='';var f=str.charAt(0).toUpperCase();return f+str.substr(1);}
function ucwords(str){return(str+'').replace(/^([a-z])|\s+([a-z])/g,function($1){return $1.toUpperCase();});}
function part_names(n,a){a.setValue(ucwords(a.getValue().toLowerCase()));n.setValue(ucwords(n.getValue().toLowerCase()));var an=n.getValue().split(' ');if(an.length==0||n.getValue()==''){n.setValue(a.getValue());a.setValue('');}else{var a2=an[an.length-1]+' '+a.getValue();a.setValue(a2.trim());an[an.length-1]='';var n2=implode(' ',an);n.setValue(n2.trim());}}
function limpiar_titulo(titulo){var t=titulo.getValue().toLowerCase();t=ucfirst(t);titulo.setValue(t);}
function validateEmail(elementValue){var emailPattern=/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/;return emailPattern.test(elementValue);}
function isNumber(n){return!isNaN(parseFloat(n))&&isFinite(n);}