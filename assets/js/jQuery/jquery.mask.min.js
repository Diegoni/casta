;(function($){if(!$.measure)throw'$.mask plugin requires $.measure plugin to be present';$.mask=function(show,opts){return $('body').mask(show,opts);};var M=$.fn.mask=function(show,opts){opts=M.toOpts(show,opts);M.plugin.call(this,$.mask,opts,M.toggle);return this;};$.extend(true,$.mask,$.measure,{version:"1.0",block:true,resize:true,maskClass:'mask',maskedClass:'masked',maskCss:{position:'absolute',opacity:.15,background:'#333',zIndex:101,display:'block',cursor:'wait'},maskHtml:'<div></div>',resizeEvents:'resize',blockEvents:'mousedown mouseup keydown keypress focusin'});$.extend($.fn.mask,$.fn.measure,{toggle:function(o){var old=this.data('mask');if(old){if(o.show!==true)M.off.call(this,old,o);}else{if(o.show!==false)M.on.call(this,o);}},on:function(o){var self=this;o.mask=M.create.call(this,o);this.data('mask',o);if(o.resize){o.resizer=function(e){return M.resizeHandler.call(self,e,o);};$(window).bind(o.resizeEvents,o.resizer);}
if(o.block){o.blocker=function(e){return M.blockHandler.call(self,e,o);};$(document).bind(o.blockEvents,o.blocker);}
this.trigger('maskStart',[o]);},create:function(o){var box=M.measure.call(this.addClass(o.maskedClass),o);return $(o.maskHtml).addClass(o.maskClass).css(box).css(o.maskCss).appendTo(this);},resizeHandler:function(e,o){this.box=null;o.mask.hide();M.measure.call(this,m);o.mask.show().css(this.box);},blockHandler:function(e,o){if(e.type=='focusin')$(e.target).blur();var $els=$(e.target).parents().andSelf();return!o.page&&$els.filter('.'+o.maskedClass).length==0;},off:function(o,newO){if(o.resize)$(window).unbind(o.resizeEvents,o.resizer);if(o.block)$(document).unbind(o.blockEvents,o.blocker);o.mask.remove();this.data('mask',null).removeClass(o.maskedClass).trigger('maskStop',[o]);},toOpts:function(show,o){if(o===undefined){o=(typeof show=="boolean")?{show:show}:show;}else{o.show=show;}
return o;}});})(jQuery);