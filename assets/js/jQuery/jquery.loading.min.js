;(function($){if(!$.place)throw'$.loading plugin requires $.place plugin to be present';$.loading=function(show,opts){$('body').loading(show,opts,true);return L;};var L=$.fn.loading=function(show,opts){opts=L.toOpts(show,opts);L.plugin.call(this,$.loading,opts,function(o){if(typeof o.onAjax=="boolean"){L.setAjax.call(this,o);}else{L.toggle.call(this,o);}});return this;};$.extend(true,$.loading,$.place,{version:"2.0",effect:'update',mask:false,text:'Loading...',onAjax:undefined,delay:0,loadingClass:'loading'});$.extend(true,$.fn.loading,$.fn.place,{toggle:function(o){var old=this.data('loading');if(old){if(o.show!==true)L.off.call(this,old,o);}else{if(o.show!==false)L.on.call(this,o);}},setAjax:function(o){if(o.onAjax){var el=this,A=o.ajax={start:function(){L.on.call(el,o);},stop:function(){L.off.call(el,o);}};this.bind('ajaxStart.loading',A.start).bind('ajaxStop.loading',A.stop);}else{this.unbind('ajaxStart.loading ajaxStop.loading');}},on:function(o,force){var p=this.data('loading',o);if(o.delay&&!force){return o.delayId=setTimeout(function(){delete o.delayId;L.on.call(p,o,true);},o.delay);}
if(o.mask)o.mask=p.mask(o);p.place(o);o.self=p.data('place').self.addClass(o.loadingClass);p.trigger('loadingStart',[o]);},off:function(o,newO){this.data('loading',null);if(o.delayId)return clearTimeout(o.delayId);if(o.mask)this.mask(false,o);this.place(false,o);if(o.parent)o.parent.trigger('loadingEnd',[o]);},toOpts:function(s,o){if(o===undefined){o=(typeof s=="boolean")?{show:s}:s;}else{o.show=s;}
if(o&&(o.img||o.element)&&!o.effect)o.effect=false;if(o&&o.onAjax!==undefined&&o.show===undefined)o.show=false;return o;}});$(function(){if($.txt){$.loading.text=$.txt($.loading.text);}});})(jQuery);